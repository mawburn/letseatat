<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Random Lunch Picker</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous">
</head>
<body>
  <div class="container">
    <h3>You're going to</h3>
    <h1 id="choice"></h1>
  </div>
  <script> 
(function(window, document) {

  fetch('resturaunts.json')
    .then(res => res.json())
    .then(json => {
      makeChoice(json)
    }).catch(err => {
      document.getElementById('choice').innerHTML = 'error'
    })

  function weightList(places) {
    let outputArr = []

    for(place in places) {
      for(let i=place.weight; i > 0; --i) {
        outputArr.push(place)
      }
    }

    return outputArr
  }

  function makeChoice(places) {
    let weightedList = weightList(places)
    let output = document.getElementById('choice')
    let randSpot = Math.floor(Math.random() * weightedList.length)
    console.log(weightedList)

    output.innerHTML = weightedList[randSpot].name
  }

})(window, document)
  </script>
</body>
</html>